import{a as st,b as lt,c as ct}from"./chunk-B5FZ2WQL.js";import{a as Be,b as Ue,d as nt,e as it,f as ot,g as rt,h as at}from"./chunk-LF3XPNYK.js";import{a as tt}from"./chunk-PW7NHB76.js";import{b as v,d as V}from"./chunk-LLKHDBC3.js";import{j as E}from"./chunk-6KEXGLU6.js";import{a as pt}from"./chunk-RKTCJEOY.js";import{a as He,b as Ge}from"./chunk-NSE6TCQI.js";import{a as Ve,b as De}from"./chunk-7SVGC4PF.js";import"./chunk-BLP2QKOI.js";import{a as Re}from"./chunk-2AU3DWM6.js";import{d as je,e as qe,f as Je,g as Ke,h as Ye,i as Qe,j as Xe,k as Ze,l as et}from"./chunk-5QLMIS2T.js";import"./chunk-AC3HQBQA.js";import{c as Se,e as Te,i as ye,j as ke,k as Ee,l as Le,m as Oe}from"./chunk-LGKW5UID.js";import"./chunk-S7HKNFMP.js";import{C as Me,D as Ne,E as Pe,F as Fe}from"./chunk-JRSAV2BJ.js";import{a as we,b as ve,c as ge,e as Ie}from"./chunk-NQV5DYDD.js";import{a as re,b as se,c as le}from"./chunk-GDVKQRMD.js";import"./chunk-RHY6STZI.js";import{b as We}from"./chunk-6UZGPCTB.js";import{b as ae}from"./chunk-DC7EUWMI.js";import{$a as ce,Fb as $e,Tb as Ae,V as j,X as q,Z as S,ab as _e,cb as de,db as pe,fb as me,gb as he,jb as xe,mb as be,nb as fe,ob as ue,pb as ze,qb as Ce}from"./chunk-MAZKCBFL.js";import{$b as N,Ac as U,Ad as Y,Ba as h,Ca as x,Hb as u,Hc as y,Id as Q,Jb as l,Kd as X,Ld as Z,Pd as k,Qd as ee,Rd as te,Ud as ne,Vd as ie,Wd as oe,Xb as r,Yb as a,Yd as f,Zb as z,_b as M,a as $,b as D,bc as g,ec as m,f as dt,fd as R,gc as d,gd as H,hb as L,lb as i,mb as I,oc as T,od as G,pc as _,qc as p,rc as C,sc as P,tb as O,td as J,ud as K,vc as F,wc as A,xc as B}from"./chunk-7RAYS7TL.js";var _t=dt(pt());var mt=c=>({count:c});function ht(c,n){if(c&1){let e=g();r(0,"button",13),m("click",function(){h(e);let o=d();return x(o.handleSync())}),_(1),a()}if(c&2){let e=d();l("nzLoading",e.syncLoading),i(),C(" ",e.$t("_save")," ")}}function xt(c,n){if(c&1){let e=g();r(0,"button",14),m("click",function(){h(e);let o=d();return x(o.handleReset())}),_(1),a()}if(c&2){let e=d();i(),C(" ",e.$t("_resetInitData")," ")}}function bt(c,n){c&1&&z(0,"i",42)}function ft(c,n){if(c&1){let e=g();r(0,"tr")(1,"td",20),m("nzCheckedChange",function(o){let s=h(e).$implicit,b=d(2);return x(b.onItemChecked(s.title,o))}),a(),r(2,"td"),z(3,"app-logo",36),a(),r(4,"td"),_(5),a(),r(6,"td"),u(7,bt,1,0,"i",37),a(),r(8,"td"),_(9),a(),r(10,"td",38)(11,"a",39),m("click",function(){let o=h(e).index,s=d(2);return x(s.moveOneUp(o))}),_(12),a(),r(13,"a",40),m("click",function(){let o=h(e).index,s=d(2);return x(s.moveOneDown(o))}),_(14),a(),r(15,"a",40),m("click",function(){let o=h(e),s=o.$implicit,b=o.index,w=d(2);return x(w.handleEditBtn(s,b))}),_(16),a(),r(17,"a",41),m("nzOnConfirm",function(){let o=h(e).index,s=d(2);return x(s.handleConfirmDelOne(o))}),_(18),a()()()}if(c&2){let e=n.$implicit,t=d(2);i(),l("nzChecked",t.setOfCheckedId.has(e.title)),i(2),l("src",e.icon||"")("name",e.title),i(2),p(e.title),i(2),l("ngIf",e.ownVisible),i(2),p(e.createdAt),i(3),p(t.$t("_moveUp")),i(2),p(t.$t("_moveDown")),i(2),p(t.$t("_edit")),i(),l("nzPopconfirmTitle",t.$t("_delWarn")),i(),C(" ",t.$t("_del")," ")}}function ut(c,n){if(c&1&&z(0,"nz-option",43),c&2){let e=n.$implicit;l("nzLabel",e.title)("nzValue",e.title)}}function zt(c,n){c&1&&z(0,"i",42)}function Ct(c,n){if(c&1){let e=g();r(0,"tr")(1,"td",20),m("nzCheckedChange",function(o){let s=h(e).$implicit,b=d(2);return x(b.onItemChecked(s.title,o))}),a(),r(2,"td"),z(3,"app-logo",36),a(),r(4,"td"),_(5),a(),r(6,"td"),u(7,zt,1,0,"i",37),a(),r(8,"td"),_(9),a(),r(10,"td",38)(11,"a",39),m("click",function(){let o=h(e).index,s=d(2);return x(s.moveTwoUp(o))}),_(12),a(),r(13,"a",40),m("click",function(){let o=h(e).index,s=d(2);return x(s.moveTwoDown(o))}),_(14),a(),r(15,"a",40),m("click",function(){let o=h(e),s=o.$implicit,b=o.index,w=d(2);return x(w.handleEditBtn(s,b))}),_(16),a(),r(17,"a",40),m("click",function(){let o=h(e),s=o.$implicit,b=o.index,w=d(2);return x(w.openMoveWebModal(s,b,2))}),_(18),a(),r(19,"a",41),m("nzOnConfirm",function(){let o=h(e).index,s=d(2);return x(s.handleConfirmDelTwo(o))}),_(20),a()()()}if(c&2){let e=n.$implicit,t=d(2);i(),l("nzChecked",t.setOfCheckedId.has(e.title||"")),i(2),l("src",e.icon||"")("name",e.title||""),i(2),p(e.title),i(2),l("ngIf",e.ownVisible),i(2),p(e.createdAt),i(3),p(t.$t("_moveUp")),i(2),p(t.$t("_moveDown")),i(2),p(t.$t("_edit")),i(2),p(t.$t("_move")),i(),l("nzPopconfirmTitle",t.$t("_delWarn")),i(),C(" ",t.$t("_del")," ")}}function wt(c,n){if(c&1&&z(0,"nz-option",43),c&2){let e=n.$implicit;l("nzLabel",e.title)("nzValue",e.title)}}function vt(c,n){if(c&1&&z(0,"nz-option",43),c&2){let e=n.$implicit;l("nzLabel",e.title||"")("nzValue",e.title)}}function gt(c,n){c&1&&z(0,"i",42)}function It(c,n){if(c&1){let e=g();r(0,"tr")(1,"td",20),m("nzCheckedChange",function(o){let s=h(e).$implicit,b=d(2);return x(b.onItemChecked(s.title,o))}),a(),r(2,"td"),z(3,"app-logo",36),a(),r(4,"td"),_(5),a(),r(6,"td"),u(7,gt,1,0,"i",37),a(),r(8,"td"),_(9),a(),r(10,"td",38)(11,"a",39),m("click",function(){let o=h(e).index,s=d(2);return x(s.moveThreeUp(o))}),_(12),a(),r(13,"a",40),m("click",function(){let o=h(e).index,s=d(2);return x(s.moveThreeDown(o))}),_(14),a(),r(15,"a",40),m("click",function(){let o=h(e),s=o.$implicit,b=o.index,w=d(2);return x(w.handleEditBtn(s,b))}),_(16),a(),r(17,"a",40),m("click",function(){let o=h(e),s=o.$implicit,b=o.index,w=d(2);return x(w.openMoveWebModal(s,b,3))}),_(18),a(),r(19,"a",41),m("nzOnConfirm",function(){let o=h(e).index,s=d(2);return x(s.handleConfirmDelThree(o))}),_(20),a()()()}if(c&2){let e=n.$implicit,t=d(2);i(),l("nzChecked",t.setOfCheckedId.has(e.title||"")),i(2),l("src",e.icon||"")("name",e.title||""),i(2),p(e.title),i(2),l("ngIf",e.ownVisible),i(2),p(e.createdAt),i(3),p(t.$t("_moveUp")),i(2),p(t.$t("_moveDown")),i(2),p(t.$t("_edit")),i(2),p(t.$t("_move")),i(),l("nzPopconfirmTitle",t.$t("_delWarn")),i(),C(" ",t.$t("_del")," ")}}function St(c,n){if(c&1&&z(0,"nz-option",43),c&2){let e=n.$implicit;l("nzLabel",e.title)("nzValue",e.title)}}function Tt(c,n){if(c&1&&z(0,"nz-option",43),c&2){let e=n.$implicit;l("nzLabel",e.title||"")("nzValue",e.title)}}function yt(c,n){if(c&1&&z(0,"nz-option",43),c&2){let e=n.$implicit;l("nzLabel",e.title||"")("nzValue",e.title||"")}}function kt(c,n){if(c&1){let e=g();r(0,"div")(1,"a",39),m("click",function(){h(e);let o=d().index,s=d(2);return x(s.moveWebUp(o))}),_(2),a()()}if(c&2){let e=d(3);i(2),p(e.$t("_moveUp"))}}function Et(c,n){if(c&1){let e=g();r(0,"div")(1,"a",39),m("click",function(){h(e);let o=d().index,s=d(2);return x(s.moveWebDown(o))}),_(2),a()()}if(c&2){let e=d(3);i(2),p(e.$t("_moveDown"))}}function Vt(c,n){if(c&1){let e=g();r(0,"div")(1,"a",39),m("click",function(){h(e);let o=d(),s=o.$implicit,b=o.index,w=d(2);return x(w.openMoveWebModal(s,b))}),_(2),a()()}if(c&2){let e=d(3);i(2),p(e.$t("_move"))}}function Wt(c,n){c&1&&z(0,"span",52)}function $t(c,n){if(c&1&&z(0,"app-logo",36),c&2){let e=d().$implicit;l("src",e.icon)("name",e.name)}}function Dt(c,n){if(c&1&&z(0,"tag-list",53),c&2){let e=d().$implicit;l("data",e.tags)}}function Lt(c,n){c&1&&z(0,"i",42)}function Ot(c,n){if(c&1){let e=g();r(0,"tr")(1,"td",20),m("nzCheckedChange",function(o){let s=h(e).$implicit,b=d(2);return x(b.onItemChecked(s.name,o))}),a(),r(2,"td",44),u(3,kt,3,1,"div",45)(4,Et,3,1,"div",45),r(5,"a",39),m("click",function(){let o=h(e).$implicit,s=d(2);return x(s.openEditModal(o))}),_(6),a(),u(7,Vt,3,1,"div",45),r(8,"a",46),m("nzOnConfirm",function(){let o=h(e),s=o.$implicit,b=o.index,w=d(2);return x(w.handleConfirmDelWebsite(s,b))}),_(9),a()(),r(10,"td"),u(11,Wt,1,0,"span",47),a(),r(12,"td"),u(13,$t,1,2,"app-logo",48),a(),r(14,"td")(15,"a",49),_(16),a()(),r(17,"td"),u(18,Dt,1,1,"tag-list",50),a(),r(19,"td"),u(20,Lt,1,0,"i",37),a(),r(21,"td")(22,"pre",51),_(23),a()(),r(24,"th",35),_(25),a(),r(26,"td"),_(27),a()()}if(c&2){let e=n.$implicit,t=d(2);i(),l("nzChecked",t.setOfCheckedId.has(e.name)),i(2),l("ngIf",t.errorWebs.length<=0),i(),l("ngIf",t.errorWebs.length<=0),i(2),p(t.$t("_edit")),i(),l("ngIf",t.errorWebs.length<=0),i(),l("nzPopconfirmTitle",t.$t("_confirmDel")),i(),C(" ",t.$t("_del")," "),i(2),l("ngIf",e.ok===!1),i(2),l("ngIf",e.icon),i(2),l("href",e.url,L),i(),p(e.name),i(2),l("ngIf",e.tags),i(2),l("ngIf",e.ownVisible),i(3),p(e.desc),i(2),p(e.breadcrumb),i(2),p(e.createdAt)}}function Mt(c,n){if(c&1){let e=g();r(0,"nz-tabset",15),m("nzSelectedIndexChange",function(o){h(e);let s=d();return x(s.onTabChange(o))}),r(1,"nz-tab",16)(2,"button",17),m("click",function(){h(e);let o=d();return x(o.toggleCreateModal())}),_(3),a(),r(4,"button",18),m("nzOnConfirm",function(){h(e);let o=d();return x(o.onBatchDelete(1))}),_(5),a(),r(6,"nz-table",19,0)(9,"thead")(10,"tr")(11,"th",20),m("nzCheckedChange",function(o){h(e);let s=d();return x(s.onAllChecked(o,1))}),a(),r(12,"th"),_(13),a(),r(14,"th"),_(15),a(),r(16,"th"),_(17),a(),r(18,"th"),_(19),a(),r(20,"th"),_(21),a()()(),r(22,"tbody"),u(23,ft,19,11,"tr",21),a()()(),r(24,"nz-tab",16)(25,"nz-select",22),m("ngModelChange",function(o){h(e);let s=d();return x(s.hanldeOneSelect(o))}),u(26,ut,1,2,"nz-option",23),a(),r(27,"button",24),m("click",function(){h(e);let o=d();return x(o.toggleCreateModal())}),_(28),a(),r(29,"button",18),m("nzOnConfirm",function(){h(e);let o=d();return x(o.onBatchDelete(2))}),_(30),a(),r(31,"nz-table",19,0)(34,"thead")(35,"tr")(36,"th",20),m("nzCheckedChange",function(o){h(e);let s=d();return x(s.onAllChecked(o,2))}),a(),r(37,"th"),_(38),a(),r(39,"th"),_(40),a(),r(41,"th"),_(42),a(),r(43,"th"),_(44),a(),r(45,"th"),_(46),a()()(),r(47,"tbody"),u(48,Ct,21,12,"tr",21),a()()(),r(49,"nz-tab",16)(50,"nz-select",25),m("ngModelChange",function(o){h(e);let s=d();return x(s.hanldeOneSelect(o))}),u(51,wt,1,2,"nz-option",23),a(),r(52,"nz-select",26),m("ngModelChange",function(o){h(e);let s=d();return x(s.hanldeTwoSelect(o))}),u(53,vt,1,2,"nz-option",23),a(),r(54,"button",24),m("click",function(){h(e);let o=d();return x(o.toggleCreateModal())}),_(55),a(),r(56,"button",18),m("nzOnConfirm",function(){h(e);let o=d();return x(o.onBatchDelete(3))}),_(57),a(),r(58,"nz-table",19,0)(61,"thead")(62,"tr")(63,"th",20),m("nzCheckedChange",function(o){h(e);let s=d();return x(s.onAllChecked(o,3))}),a(),r(64,"th"),_(65),a(),r(66,"th"),_(67),a(),r(68,"th"),_(69),a(),r(70,"th"),_(71),a(),r(72,"th"),_(73),a()()(),r(74,"tbody"),u(75,It,21,12,"tr",21),a()()(),r(76,"nz-tab",16)(77,"nz-select",27),m("ngModelChange",function(o){h(e);let s=d();return x(s.hanldeOneSelect(o))}),u(78,St,1,2,"nz-option",23),a(),r(79,"nz-select",28),m("ngModelChange",function(o){h(e);let s=d();return x(s.hanldeTwoSelect(o))}),u(80,Tt,1,2,"nz-option",23),a(),r(81,"nz-select",28),m("ngModelChange",function(o){h(e);let s=d();return x(s.hanldeThreeSelect(o))}),u(82,yt,1,2,"nz-option",23),a(),r(83,"button",24),m("click",function(){h(e);let o=d();return x(o.openCreateWebModal())}),_(84),a(),r(85,"button",24),m("click",function(){h(e);let o=d();return x(o.getAllErrorWeb())}),_(86),a(),r(87,"button",18),m("nzOnConfirm",function(){h(e);let o=d();return x(o.onBatchDelete(4))}),_(88),a(),r(89,"nz-table",19,0)(92,"thead")(93,"tr")(94,"th",29),m("nzCheckedChange",function(o){h(e);let s=d();return x(s.onAllChecked(o,4))}),a(),r(95,"th",30),_(96),a(),r(97,"th",31),_(98),a(),r(99,"th",32),_(100),a(),r(101,"th",33),_(102),a(),r(103,"th",33),_(104),a(),r(105,"th",34),_(106),a(),r(107,"th",35),_(108),a(),r(109,"th",35),_(110),a(),r(111,"th"),_(112),a()()(),r(113,"tbody"),u(114,Ot,28,16,"tr",21),a()()()()}if(c&2){let e=d();l("nzSelectedIndex",e.tabActive),i(),l("nzTitle",e.$t("_mgr1")),i(2),C(" ",e.$t("_addTag")," "),i(),l("nzPopconfirmTitle",e.$t("_confirmDel"))("disabled",e.setOfCheckedId.size<=0),i(),C(" ",e.$t("_batchDel")," "),i(),l("nzData",e.websiteList)("nzShowPagination",!1),i(5),l("nzChecked",e.checkedAll),i(2),p(e.$t("_icon")),i(2),p(e.$t("_tagName")),i(2),p(e.$t("_onlyOwnVisible")),i(2),p(e.$t("_createAt")),i(2),p(e.$t("_action")),i(2),l("ngForOf",e.websiteList),i(),l("nzTitle",e.$t("_mgr2")),i(),l("ngModel",e.oneSelect)("nzPlaceHolder",e.$t("_sel1")),i(),l("ngForOf",e.websiteList),i(2),C(" ",e.$t("_addTag")," "),i(),l("nzPopconfirmTitle",e.$t("_confirmDel"))("disabled",e.setOfCheckedId.size<=0),i(),C(" ",e.$t("_batchDel")," "),i(),l("nzData",e.twoTableData)("nzShowPagination",!1),i(5),l("nzChecked",e.checkedAll),i(2),p(e.$t("_icon")),i(2),p(e.$t("_tagName")),i(2),p(e.$t("_onlyOwnVisible")),i(2),p(e.$t("_createAt")),i(2),p(e.$t("_action")),i(2),l("ngForOf",e.twoTableData),i(),l("nzTitle",e.$t("_mgr3")),i(),l("ngModel",e.oneSelect)("nzPlaceHolder",e.$t("_sel1")),i(),l("ngForOf",e.websiteList),i(),l("ngModel",e.twoSelect)("nzPlaceHolder",e.$t("_sel2")),i(),l("ngForOf",e.twoTableData),i(2),C(" ",e.$t("_addTag")," "),i(),l("nzPopconfirmTitle",e.$t("_confirmDel"))("disabled",e.setOfCheckedId.size<=0),i(),C(" ",e.$t("_batchDel")," "),i(),l("nzData",e.threeTableData)("nzShowPagination",!1),i(5),l("nzChecked",e.checkedAll),i(2),p(e.$t("_icon")),i(2),p(e.$t("_tagName")),i(2),p(e.$t("_onlyOwnVisible")),i(2),p(e.$t("_createAt")),i(2),p(e.$t("_action")),i(2),l("ngForOf",e.threeTableData),i(),l("nzTitle",e.$t("_mgrWeb")+"\uFF08"+e.internal.loginViewCount+"\uFF09"),i(),l("ngModel",e.oneSelect)("nzPlaceHolder",e.$t("_sel1")),i(),l("ngForOf",e.websiteList),i(),l("ngModel",e.twoSelect)("nzPlaceHolder",e.$t("_sel2")),i(),l("ngForOf",e.twoTableData),i(),l("ngModel",e.threeSelect)("nzPlaceHolder",e.$t("_sel3")),i(),l("ngForOf",e.threeTableData),i(2),P(" ",e.$t("_addWeb"),"\uFF08",e.websiteTableData.length,"\uFF09 "),i(2),C(" ",e.$t("_getErrorWeb")," "),i(),l("nzPopconfirmTitle",e.$t("_confirmDel"))("disabled",e.setOfCheckedId.size<=0),i(),C(" ",e.$t("_batchDel")," "),i(),l("nzData",e.websiteTableData)("nzShowPagination",!1),i(5),l("nzChecked",e.checkedAll),i(2),p(e.$t("_action")),i(2),p(e.$t("_status")),i(2),p(e.$t("_icon")),i(2),p(e.$t("_webName")),i(2),p(e.$t("_associatedLabels")),i(2),p(e.$t("_onlyOwnVisible")),i(2),p(e.$t("_webDesc")),i(2),p(e.$t("_webTag")),i(2),p(e.$t("_createAt")),i(2),l("ngForOf",e.websiteTableData)}}function Nt(c,n){if(c&1&&z(0,"app-logo",63),c&2){let e=d(3);l("src",e.iconUrl)("size",25)}}function Pt(c,n){if(c&1&&u(0,Nt,1,2,"app-logo",62),c&2){let e=d(2);l("ngIf",e.iconUrl)}}function Ft(c,n){if(c&1){let e=g();r(0,"app-upload",64),m("onChange",function(o){h(e);let s=d(2);return x(s.onChangeFile(o))}),a()}}function At(c,n){if(c&1&&(M(0),r(1,"form",54)(2,"nz-form-item")(3,"nz-form-label",55),_(4,"\u5206\u7C7B\u540D\u79F0"),a(),r(5,"nz-form-control",56),z(6,"input",57),a()(),r(7,"nz-form-item")(8,"nz-form-label",55),_(9),a(),r(10,"nz-form-control",58),z(11,"nz-switch",59),a()(),r(12,"nz-form-item")(13,"nz-form-label",58),_(14,"\u56FE\u6807\u5730\u5740"),a(),r(15,"nz-form-control",58)(16,"nz-input-group",60),z(17,"input",61),a(),u(18,Pt,1,1,"ng-template",null,1,y)(20,Ft,1,0,"ng-template",null,2,y),a()()(),N()),c&2){let e=T(19),t=T(21),o=d();i(),l("formGroup",o.validateForm),i(2),l("nzSpan",6),i(2),l("nzSpan",18)("nzErrorTip",o.$t("_requiredName")),i(),l("placeholder",o.$t("_webTitle")),i(2),l("nzSpan",6),i(),p(o.$t("_onlyOwnVisible")),i(),l("nzSpan",18),i(3),l("nzSpan",6),i(2),l("nzSpan",18),i(),l("nzPrefix",e)("nzSuffix",t)}}var W=class c{constructor(n,e,t,o){this.fb=n;this.modal=e;this.notification=t;this.message=o;this.validateForm=this.fb.group({title:["",[_e.required]],icon:[""],ownVisible:[!1]})}$t=f;isSelfDevelop=Z;settings=k;internal=ne;validateForm;websiteList=ie;gitRepoUrl=J.gitRepoUrl;isLogin=X;showCreateModal=!1;syncLoading=!1;uploading=!1;tabActive=0;editIdx=0;isEdit=!1;oneSelect="";twoSelect="";threeSelect="";checkedAll=!1;setOfCheckedId=new Set;errorWebs=[];ngOnInit(){}get oneIndex(){return this.websiteList.findIndex(n=>n.title===this.oneSelect)}get twoIndex(){try{return this.twoTableData.findIndex(n=>n.title===this.twoSelect)}catch{return-1}}get threeIndex(){try{return this.threeTableData.findIndex(n=>n.title===this.threeSelect)}catch{return-1}}get twoTableData(){try{return this.websiteList.find(n=>n.title===this.oneSelect)?.nav||[]}catch{return[]}}get threeTableData(){try{return this.twoTableData.find(n=>n.title===this.twoSelect)?.nav||[]}catch{return[]}}get websiteTableData(){try{let n=this.threeTableData.find(e=>e.title===this.threeSelect);return n?n.nav:this.errorWebs}catch{return this.errorWebs}}getAllErrorWeb(){this.oneSelect="",this.twoSelect="",this.threeSelect="",this.onTabChange();let n=[];function e(t){if(Array.isArray(t))for(let o=0;o<t.length;o++){let s=t[o];s.url&&s.ok===!1?n.push(s):e(s.nav)}}e(this.websiteList),this.errorWebs=n,n.length<=0?this.message.success("No error!"):this.message.warning(`\u68C0\u6D4B\u51FA ${n.length} \u4E2A\u7F51\u7AD9\u7591\u4F3C\u5F02\u5E38`)}onAllChecked(n,e){switch(this.setOfCheckedId.clear(),e){case 1:this.websiteList.forEach(t=>{n?this.setOfCheckedId.add(t.title):this.setOfCheckedId.delete(t.title)});break;case 2:this.twoTableData.forEach(t=>{n?this.setOfCheckedId.add(t.title):this.setOfCheckedId.delete(t.title)});break;case 3:this.threeTableData.forEach(t=>{n?this.setOfCheckedId.add(t.title):this.setOfCheckedId.delete(t.title)});break;case 4:this.websiteTableData.forEach(t=>{n?this.setOfCheckedId.add(t.name):this.setOfCheckedId.delete(t.name)});break}}onItemChecked(n,e){e?this.setOfCheckedId.add(n):this.setOfCheckedId.delete(n)}onBatchDelete(n){switch(n){case 1:this.setOfCheckedId.forEach(e=>{let t=this.websiteList.findIndex(o=>o.title===e);t>=0&&this.websiteList.splice(t,1)});break;case 2:this.oneIndex>=0&&(this.websiteList[this.oneIndex].nav=this.websiteList[this.oneIndex].nav.filter(e=>!this.setOfCheckedId.has(e.title)));break;case 3:this.oneIndex>=0&&this.twoIndex>=0&&(this.websiteList[this.oneIndex].nav[this.twoIndex].nav=this.websiteList[this.oneIndex].nav[this.twoIndex].nav.filter(e=>!this.setOfCheckedId.has(e.title)));break;case 4:{let e=[];this.websiteTableData.forEach(t=>{let o=!this.setOfCheckedId.has(t.name);return o||e.push(t),o}),e.forEach(t=>{V(D($({},t),{name:E(t.name),desc:E(t.desc)}))}),this.errorWebs.length&&this.getAllErrorWeb(),this.message.success(f("_delSuccess"))}break}this.onTabChange(),v(this.websiteList)}handleReset(){this.modal.info({nzTitle:f("_resetInitData"),nzContent:f("_warnReset"),nzOnOk:()=>{this.message.success(f("_actionSuccess")),window.localStorage.removeItem(Y.s_url),Q().finally(()=>{window.location.reload()})}})}handleDownloadBackup(){let n={db:this.websiteList,settings:k,tag:te,search:ee,component:oe};for(let e in n)(0,_t.saveAs)(new Blob([JSON.stringify(n[e])],{type:"text/plain;charset=utf-8"}),`${e}.json`)}handleUploadBackup(n){let e=this,t=n.target.files;if(t.length<=0)return;let o=t[0],s=new FileReader;s.readAsText(o),s.onload=function(b){try{let{result:w}=b.target;e.websiteList=JSON.parse(w),e.message.success(f("_actionSuccess")),v(e.websiteList).finally(()=>{location.reload()})}catch(w){e.notification.error(f("_error"),w.message)}}}goBack(){history.go(-1)}openMoveWebModal(n,e,t){S.emit("MOVE_WEB",{indexs:[this.oneIndex,this.twoIndex,this.threeIndex,e],data:[n],level:t})}openCreateWebModal(){if(this.tabActive===3&&!this.threeSelect)return this.message.error(f("_sel3"));S.emit("CREATE_WEB",{oneIndex:this.oneIndex,twoIndex:this.twoIndex,threeIndex:this.threeIndex})}openEditModal(n){S.emit("CREATE_WEB",{detail:n})}toggleCreateModal(){if(!this.showCreateModal){if(this.tabActive===1&&!this.oneSelect)return this.message.error(f("_sel1"));if(this.tabActive===2&&!this.twoSelect)return this.message.error(f("_sel2"))}this.isEdit=!1,this.showCreateModal=!this.showCreateModal,this.validateForm.reset()}onTabChange(n){this.errorWebs=[],this.tabActive=n??this.tabActive,this.setOfCheckedId.clear(),this.checkedAll||setTimeout(()=>{this.checkedAll=!this.checkedAll,setTimeout(()=>{this.checkedAll=!this.checkedAll})})}handleConfirmDelOne(n){this.websiteList.splice(n,1),this.message.success(f("_delSuccess")),v(this.websiteList)}moveOneUp(n){if(n===0)return;let e=this.websiteList[n],t=this.websiteList[n-1];this.websiteList[n-1]=e,this.websiteList[n]=t,v(this.websiteList)}moveOneDown(n){if(n===this.websiteList.length-1)return;let e=this.websiteList[n],t=this.websiteList[n+1];this.websiteList[n+1]=e,this.websiteList[n]=t,v(this.websiteList)}moveTwoUp(n){try{if(n===0)return;let e=this.websiteList[this.oneIndex].nav[n],t=this.websiteList[this.oneIndex].nav[n-1];this.websiteList[this.oneIndex].nav[n-1]=e,this.websiteList[this.oneIndex].nav[n]=t,v(this.websiteList)}catch(e){this.notification.error(f("_error"),e.message)}}moveTwoDown(n){try{if(n===this.websiteList[this.oneIndex].nav.length-1)return;let e=this.websiteList[this.oneIndex].nav[n],t=this.websiteList[this.oneIndex].nav[n+1];this.websiteList[this.oneIndex].nav[n+1]=e,this.websiteList[this.oneIndex].nav[n]=t,v(this.websiteList)}catch(e){this.notification.error(f("_error"),e.message)}}handleConfirmDelTwo(n){this.twoTableData.splice(n,1),this.message.success(f("_delSuccess")),v(this.websiteList)}moveThreeUp(n){try{if(n===0)return;let e=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n],t=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n-1];this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n-1]=e,this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n]=t,v(this.websiteList)}catch(e){this.notification.error(f("_error"),e.message)}}moveThreeDown(n){try{if(n===this.websiteList[this.oneIndex].nav[this.twoIndex].nav.length-1)return;let e=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n],t=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n+1];this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n+1]=e,this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n]=t,v(this.websiteList)}catch(e){this.notification.error(f("_error"),e.message)}}handleConfirmDelThree(n){this.threeTableData.splice(n,1),this.message.success(f("_delSuccess")),v(this.websiteList)}moveWebUp(n){try{if(n===0)return;let e=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n],t=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n-1];this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n-1]=e,this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n]=t,v(this.websiteList)}catch(e){this.notification.error(f("_error"),e.message)}}moveWebDown(n){try{if(n===this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav.length-1)return;let e=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n],t=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n+1];this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n+1]=e,this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n]=t,v(this.websiteList)}catch(e){this.notification.error(f("_error"),e.message)}}handleConfirmDelWebsite(n,e){V(n)&&(this.message.success(f("_delSuccess")),this.errorWebs.length&&this.getAllErrorWeb())}hanldeOneSelect(n){this.oneSelect=n??this.oneSelect,this.twoSelect="",this.threeSelect="",this.onTabChange()}hanldeTwoSelect(n){this.twoSelect=n??this.twoSelect,this.threeSelect="",this.onTabChange()}hanldeThreeSelect(n){this.threeSelect=n??this.threeSelect,this.onTabChange()}handleEditBtn(n,e){let{title:t,icon:o,name:s,ownVisible:b}=n;this.toggleCreateModal(),this.isEdit=!0,this.editIdx=e,this.validateForm.get("title").setValue(t||s||""),this.validateForm.get("icon").setValue(o||""),this.validateForm.get("ownVisible").setValue(!!b)}onChangeFile(n){this.validateForm.get("icon").setValue(n.cdn)}get iconUrl(){return this.validateForm.get("icon")?.value||""}handleSync(){this.modal.info({nzTitle:f("_syncDataOut"),nzOkText:f("_confirmSync"),nzContent:f("_confirmSyncTip"),nzOnOk:()=>{this.syncLoading=!0,$e({message:"update db",content:JSON.stringify(this.websiteList),path:K}).then(()=>{this.message.success(f("_syncSuccessTip"))}).finally(()=>{this.syncLoading=!1})}})}handleOk(){let n=Date.now();for(let s in this.validateForm.controls)this.validateForm.controls[s].markAsDirty(),this.validateForm.controls[s].updateValueAndValidity();let{title:e,icon:t,ownVisible:o}=this.validateForm.value;if(!e||!e.trim()){this.message.error("\u5206\u7C7B\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");return}if(e=e.trim(),this.isEdit){switch(this.tabActive){case 0:{if(this.websiteList.some(b=>b.title===e)&&this.websiteList[this.editIdx].title!==e)return this.message.error(`${f("_repeatAdd")} "${e}"`);this.websiteList[this.editIdx].title=e,this.websiteList[this.editIdx].icon=t,this.websiteList[this.editIdx].ownVisible=o}break;case 1:{if(this.twoTableData.some(b=>b.title===e)&&this.twoTableData[this.editIdx].title!==e)return this.message.error(`${f("_repeatAdd")} "${e}"`);this.twoTableData[this.editIdx].title=e,this.twoTableData[this.editIdx].icon=t,this.twoTableData[this.editIdx].ownVisible=o}break;case 2:{if(this.threeTableData.some(b=>b.title===e)&&this.threeTableData[this.editIdx].title!==e)return this.message.error(`${f("_repeatAdd")} "${e}"`);this.threeTableData[this.editIdx].title=e,this.threeTableData[this.editIdx].icon=t,this.threeTableData[this.editIdx].ownVisible=o}break}this.message.success(f("_saveSuccess"))}else{switch(this.tabActive){case 0:{if(this.websiteList.some(b=>b.title===e))return this.message.error(`${f("_repeatAdd")} "${e}"`);this.websiteList.unshift({createdAt:n,title:e,icon:t,ownVisible:o,nav:[]})}break;case 1:{if(this.twoTableData.some(b=>b.title===e))return this.message.error(`${f("_repeatAdd")} "${e}"`);this.twoTableData.unshift({createdAt:n,title:e,icon:t,ownVisible:o,nav:[]})}break;case 2:{if(this.threeTableData.some(b=>b.title===e))return this.message.error(`${f("_repeatAdd")} "${e}"`);this.threeTableData.unshift({createdAt:n,title:e,icon:t,ownVisible:o,nav:[]})}break}this.message.success(f("_addSuccess"))}this.validateForm.reset(),this.toggleCreateModal(),v(this.websiteList)}static \u0275fac=function(e){return new(e||c)(I(ue),I(Me),I(Re),I(Ae))};static \u0275cmp=O({type:c,selectors:[["app-admin"]],decls:13,vars:11,consts:[["rowSelectionTable","","basicTable",""],["prefixIcon",""],["suffixIconSearch",""],[1,"admin"],["nz-button","","nzType","primary",3,"nzLoading","click",4,"ngIf"],["nz-button","","style","margin: 0 15px 20px 15px",3,"click",4,"ngIf"],["nz-button","",2,"margin-right","15px",3,"click"],["id","file2","nz-button","","nz-tooltip","","nzTooltipPlacement","bottom",3,"nzTooltipTitle"],["type","file","name","file2","accept",".json",1,"file-upload",3,"change"],[1,"tip2"],[3,"nzSelectedIndex","nzSelectedIndexChange",4,"ngIf"],[3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible","nzTitle"],[4,"nzModalContent"],["nz-button","","nzType","primary",3,"click","nzLoading"],["nz-button","",2,"margin","0 15px 20px 15px",3,"click"],[3,"nzSelectedIndexChange","nzSelectedIndex"],[3,"nzTitle"],["nz-button","","nzType","primary",3,"click"],["nz-popconfirm","","nzPopconfirmPlacement","bottom","nz-button","","nzDanger","",1,"ml-2.5",3,"nzOnConfirm","nzPopconfirmTitle","disabled"],[2,"margin-top","15px",3,"nzData","nzShowPagination"],[3,"nzCheckedChange","nzChecked"],[4,"ngFor","ngForOf"],["nzShowSearch","",2,"width","260px",3,"ngModelChange","ngModel","nzPlaceHolder"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-button","","nzType","primary",2,"margin-left","20px",3,"click"],["nzShowSearch","",2,"width","200px",3,"ngModelChange","ngModel","nzPlaceHolder"],["nzShowSearch","",2,"width","200px","margin-left","15px",3,"ngModelChange","ngModel","nzPlaceHolder"],["nzShowSearch","",2,"width","150px",3,"ngModelChange","ngModel","nzPlaceHolder"],["nzShowSearch","",2,"width","150px","margin-left","15px",3,"ngModelChange","ngModel","nzPlaceHolder"],["nzWidth","70px",3,"nzCheckedChange","nzChecked"],["nzWidth","60px",1,"text-center"],["nzWidth","70px"],["nzWidth","80px"],["nzWidth","100px"],["nzWidth","120px"],["nzWidth","300px"],[3,"src","name"],["nz-icon","","nzType","check","nzTheme","outline",4,"ngIf"],[1,"select-none"],[3,"click"],[1,"ml-2.5",3,"click"],["nz-popconfirm","","nzPopconfirmPlacement","bottom",1,"color-red","ml-2.5",3,"nzOnConfirm","nzPopconfirmTitle"],["nz-icon","","nzType","check","nzTheme","outline"],[3,"nzLabel","nzValue"],[1,"text-center","select-none"],[4,"ngIf"],["nz-popconfirm","","nzPopconfirmPlacement","bottom",1,"color-red",3,"nzOnConfirm","nzPopconfirmTitle"],["nz-icon","","nzType","close","nzTheme","outline","style","color: red",4,"ngIf"],[3,"src","name",4,"ngIf"],["target","_blank",3,"href"],[3,"data",4,"ngIf"],[1,"desc"],["nz-icon","","nzType","close","nzTheme","outline",2,"color","red"],[3,"data"],["nz-form","",3,"formGroup"],["nzRequired","",3,"nzSpan"],[3,"nzSpan","nzErrorTip"],["formControlName","title","nz-input","","maxlength","50",3,"placeholder"],[3,"nzSpan"],["formControlName","ownVisible"],[3,"nzPrefix","nzSuffix"],["formControlName","icon","nz-input","","placeholder","\u7528\u4E8E\u67D0\u4E9B\u4E3B\u9898icon"],[3,"src","size",4,"ngIf"],[3,"src","size"],[3,"onChange"]],template:function(e,t){e&1&&(r(0,"div",3),u(1,ht,2,2,"button",4)(2,xt,2,1,"button",5),r(3,"button",6),m("click",function(){return t.handleDownloadBackup()}),_(4),a(),r(5,"label",7),_(6),r(7,"input",8),m("change",function(s){return t.handleUploadBackup(s)}),a()(),r(8,"div",9),_(9),a(),u(10,Mt,115,81,"nz-tabset",10),a(),r(11,"nz-modal",11),B("nzVisibleChange",function(s){return A(t.showCreateModal,s)||(t.showCreateModal=s),s}),m("nzOnCancel",function(){return t.toggleCreateModal()})("nzOnOk",function(){return t.handleOk()}),u(12,At,22,12,"ng-container",12),a()),e&2&&(i(),l("ngIf",!t.isSelfDevelop),i(),l("ngIf",!t.isSelfDevelop),i(2),C(" ",t.$t("_backup")," "),i(),l("nzTooltipTitle",t.$t("_importBackupTip")),i(),C(" ",t.$t("_importBackup")," "),i(3),C(" ",t.$t("_errCountTip",U(9,mt,t.settings.errorUrlCount||0))," "),i(),l("ngIf",t.isLogin),i(),F("nzVisible",t.showCreateModal),l("nzTitle",t.isEdit?t.$t("_edit"):t.$t("_add")))},dependencies:[G,R,H,Te,Se,ze,he,ce,de,pe,fe,me,Ce,xe,be,Ie,we,ge,ve,le,se,re,ae,We,et,Qe,je,Je,qe,Ze,Ye,Xe,Ke,ct,lt,st,Oe,Le,Ee,ye,ke,Ve,q,j,Fe,Pe,Ne,at,Ue,Be,it,nt,rt,ot,Ge,He,tt,De],styles:[".desc[_ngcontent-%COMP%]{width:300px;white-space:pre-wrap;word-break:break-all}#file2[_ngcontent-%COMP%]{position:relative;cursor:pointer}#file2[_ngcontent-%COMP%]   .file-upload[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:1px;opacity:0;cursor:pointer}.tip2[_ngcontent-%COMP%]{color:#f50;font-weight:700;margin-top:10px}.admin[_ngcontent-%COMP%]     .ant-table{max-height:600px;overflow:auto}"]})};export{W as default};
